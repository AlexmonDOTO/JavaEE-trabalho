<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:f="http://java.sun.com/jsf/core">
	  
	  <ui:composition template="../layout.xhtml">
	  
	  	<ui:define name="conteudo">
	  	
	  		<p:panel header="Filmes">
	  		
	  			<h:form>
	  			
	  				<p:growl />
	  			
	  				<h:inputHidden value="#{filmeController.filme.idFilme}" />
	  			
	  				<h:panelGrid columns="2">
	  				
	  					<p:outputLabel value="Modelo:" />
	  					<p:selectOneMenu value="#{filmeController.filme.modelo}" 
	  									 filter="true"
	  									 converter="entityConverter">
	  						
	  						<f:selectItems value="#{modeloController.todos()}"
	  									   var="modelo"
	  									   itemLabel="#{modelo.descricao}"
	  									   itemValue="#{modelo}" />
	  									   
	  					</p:selectOneMenu>
	  					
	  					<p:outputLabel value="Combustivel:" />
	  					<p:selectOneMenu value="#{filmeController.filme.combustivel}" 
	  									 filter="true"
	  									 converter="entityConverter">
	  						
	  						<f:selectItems value="#{combustivelController.todos()}"
	  									   var="combustivel"
	  									   itemLabel="#{combustivel.descricao}"
	  									   itemValue="#{combustivel}" />
	  									   
	  					</p:selectOneMenu>
	  					
	  					<p:outputLabel value="Cor:" />
	  					<p:selectOneMenu value="#{filmeController.filme.cor}" 
	  									 filter="true"
	  									 converter="entityConverter">
	  						
	  						<f:selectItems value="#{corController.todos()}"
	  									   var="cor"
	  									   itemLabel="#{cor.descricao}"
	  									   itemValue="#{cor}" />
	  									   
	  					</p:selectOneMenu>
	  				
	  					<p:outputLabel value="Ano:" />
	  					<p:inputMask mask="9999" value="#{filmeController.filme.ano}" />	
	  					
	  					<p:outputLabel value="Valor:" />
	  					<p:inputText value="#{filmeController.filme.valor}"/>	
	  					
	  					<p:outputLabel value="Qtd. Portas:" />
	  					<p:inputText value="#{filmeController.filme.quantidadePortas}" />	
	  					
	  					<p:outputLabel value="Opcionais:" />
	  					<p:selectCheckboxMenu value="#{filmeController.filme.opcionais}"
	  							converter="entityConverter"
	  							label="Opcionais">
	  							
	  							<f:selectItems value="#{opcionalController.todos()}"
	  								var="o"
	  								itemLabel="#{o.descricao}"
	  								itemValue="#{o}" />
	  							
	  					
	  					</p:selectCheckboxMenu>
	  					
	  				</h:panelGrid>
	  				
	  				<p:commandButton value="Salvar"
	  								 actionListener="#{filmeController.salvar()}"
	  								 update="@form" />
	  			
	  				<p:dataTable value="#{filmeController.todos()}"
	  							 var="filme"
	  							 paginator="true"
	  							 rows="10"
	  							 emptyMessage="Nenhum filme foi cadastrado">
	  				
	  						<p:column headerText="CÃ³digo">
	  							#{filme.idFilme}	  						
	  						</p:column>
	  						
	  						<p:column headerText="Ano">
	  							#{filme.ano}
	  						</p:column>
	  						
	  						<p:column headerText="Valor">
	  							#{filme.valor}
	  						</p:column>
	  						
	  						<p:column headerText="Qtd. Portas">
	  							#{filme.quantidadePortas}
	  						</p:column>
	  						
	  						<p:column headerText="Modelo">
	  							#{filme.modelo.marca.descricao} - #{filme.modelo.descricao}
	  						</p:column>
	  						
	  						<p:column headerText="Cor">
	  							#{filme.cor.descricao}
	  						</p:column>
	  						
	  						<p:column headerText="Combustivel">
	  							#{filme.combustivel.descricao}
	  						</p:column>
	  						
	  						<p:column headerText="Opcionais">
	  						
	  							<ul>
	  								
	  								<ui:repeat var="opcional" value="#{filme.opcionais}">
	  									
	  									<li>#{opcional.descricao}</li>
	  									
	  								</ui:repeat>
	  							
	  							</ul>
	  						
	  						</p:column>
	  						
	  						
	  						<p:column headerText="Editar">
	  						
	  							<p:commandButton value="Editar"
	  								actionListener="#{filmeController.editar(filme)}"
	  								process="@this"
	  								update="@form"/>
	  						
	  						</p:column>
	  						
	  						<p:column headerText="Excluir">
	  							
	  							<p:commandButton value="Excluir"
	  								actionListener="#{filmeController.excluir(filme.idFilme)}"
	  								process="@this"
	  								update="@form" />
	  							
	  						</p:column>
	  				
	  				</p:dataTable>
	  				
	  			</h:form>
	  		
	  		</p:panel>
	  	
	  	</ui:define>
	  
	  </ui:composition>

</html>